CAMLC=ocamlc
OCAMLOPT=ocamlopt
OCAMLDEP=ocamldep
# The flags needed by the ocaml compiler
OCAMLFLAGS=-I +sdl -I +lablgtk2
# The different libs needed to compile
OCAMLLD=bigarray.cmxa sdl.cmxa sdlloader.cmxa sdlttf.cmxa lablgtk.cmxa gtkInit.cmx lablgtkspell.cmxa
# The binary generated by the make command 
OUTPUT=gtk

# List of files
OCR_OBJS=filter.ml binarization.ml interface.ml

all:	$(OCR_OBJS)
	$(OCAMLOPT) $(OCAMLFLAGS) $(OCAMLLD) -o $(OUTPUT) $(OCR_OBJS)

# Common rules
.SUFFIXES: .ml .mli .cmo .cmi .cmx

.ml.cmo:
	$(OCAMLC) $(OCAMLFLAGS) -c $<

.mli.cmi:
	$(OCAMLC) $(OCAMLFLAGS) -c $<

.ml.cmx:
	$(OCAMLOPT) -c $<

# Run
run:
	./$(OUTPUT)

# Clean up everything
clean:
	rm -f $(OUTPUT)
	rm -f *.cm[iox]
	rm -f *.o
	rm -f trans.bmp
	rm -f result/*.bmp